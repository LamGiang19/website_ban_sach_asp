@model WebBanSachLg.Database.Sach

@{
    var giamGia = new Random().Next(30, 51);
    var giaCu = Model.Gia * (100 + giamGia) / 100;
    var imagePath = FileUploadHelper.GetSachImagePath(Model.HinhAnh);
}

<div class="product-card">
    <div class="product-image">
        <a asp-controller="Sach" asp-action="Details" asp-route-id="@Model.Id">
            @if (string.IsNullOrEmpty(Model.HinhAnh))
            {
                <div class="placeholder-image">
                    <i class="fas fa-book fa-3x"></i>
                    <p>@Model.TenSach</p>
                </div>
            }
            else
            {
                <img src="@imagePath" alt="@Model.TenSach" onerror="this.onerror=null; this.parentElement.innerHTML='<div class=\'placeholder-image\'><i class=\'fas fa-book fa-3x\'></i><p>@Model.TenSach</p></div>';">
            }
        </a>
    </div>
    <div class="product-info">
        <h6 class="product-title">
            <a asp-controller="Sach" asp-action="Details" asp-route-id="@Model.Id">@Model.TenSach</a>
        </h6>
        <div class="product-price">
            <span class="current-price text-orange">@Model.Gia.ToString("N0")₫</span>
            <span class="old-price">@giaCu.ToString("N0")₫</span>
        </div>
        <div class="product-actions">
            @if (Model.SoLuong > 0)
            {
                <button class="btn btn-sm btn-orange add-to-cart" data-id="@Model.Id" data-price="@Model.Gia" data-name="@Model.TenSach" data-image="@imagePath">
                    <i class="far fa-cart-plus"></i> Thêm vào giỏ hàng
                </button>
            }
            else
            {
                <button class="btn btn-sm btn-secondary" disabled>
                    <i class="far fa-times-circle"></i> Hết hàng
                </button>
            }
        </div>
    </div>
</div>
